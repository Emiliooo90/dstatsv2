const banderasMapping = {
	'AFG': 'af.svg',
	'ALA': 'ax.svg',
	'ALB': 'al.svg',
	'DZA': 'dz.svg',
	'ASM': 'as.svg',
	'AND': 'ad.svg',
	'AGO': 'ao.svg',
	'AIA': 'ai.svg',
	'ATA': 'aq.svg',
	'ATG': 'ag.svg',
	'ARG': 'ar.svg',
	'ARM': 'am.svg',
	'ABW': 'aw.svg',
	'AUS': 'au.svg',
	'AUT': 'at.svg',
	'AZE': 'az.svg',
	'BHS': 'bs.svg',
	'BHR': 'bh.svg',
	'BGD': 'bd.svg',
	'BRB': 'bb.svg',
	'BLR': 'by.svg',
	'BEL': 'be.svg',
	'BLZ': 'bz.svg',
	'BEN': 'bj.svg',
	'BMU': 'bm.svg',
	'BTN': 'bt.svg',
	'BOL': 'bo.svg',
	'BES': 'bq.svg',
	'BIH': 'ba.svg',
	'BWA': 'bw.svg',
	'BVT': 'bv.svg',
	'BRA': 'br.svg',
	'IOT': 'io.svg',
	'BRN': 'bn.svg',
	'BGR': 'bg.svg',
	'BFA': 'bf.svg',
	'BDI': 'bi.svg',
	'CIV': 'ci.svg',
	'CPV': 'cv.svg',
	'KHM': 'kh.svg',
	'CMR': 'cm.svg',
	'CAN': 'ca.svg',
	'CYM': 'ky.svg',
	'CAF': 'cf.svg',
	'TCD': 'td.svg',
	'CHL': 'cl.svg',
	'CHN': 'cn.svg',
	'CXR': 'cx.svg',
	'CCK': 'cc.svg',
	'COL': 'co.svg',
	'COM': 'km.svg',
	'COG': 'cg.svg',
	'COD': 'cd.svg',
	'COK': 'ck.svg',
	'CRI': 'cr.svg',
	'HRV': 'hr.svg',
	'CUB': 'cu.svg',
	'CUW': 'cw.svg',
	'CYP': 'cy.svg',
	'CZE': 'cz.svg',
	'DNK': 'dk.svg',
	'DJI': 'dj.svg',
	'DMA': 'dm.svg',
	'DOM': 'do.svg',
	'ECU': 'ec.svg',
	'EGY': 'eg.svg',
	'SLV': 'sv.svg',
	'GNQ': 'gq.svg',
	'ERI': 'er.svg',
	'EST': 'ee.svg',
	'ETH': 'et.svg',
	'FLK': 'fk.svg',
	'FRO': 'fo.svg',
	'FJI': 'fj.svg',
	'FIN': 'fi.svg',
	'FRA': 'fr.svg',
	'GUF': 'gf.svg',
	'PYF': 'pf.svg',
	'ATF': 'tf.svg',
	'GAB': 'ga.svg',
	'GMB': 'gm.svg',
	'GEO': 'ge.svg',
	'DEU': 'de.svg',
	'GHA': 'gh.svg',
	'GIB': 'gi.svg',
	'GRC': 'gr.svg',
	'GRL': 'gl.svg',
	'GRD': 'gd.svg',
	'GLP': 'gp.svg',
	'GUM': 'gu.svg',
	'GTM': 'gt.svg',
	'GGY': 'gg.svg',
	'GIN': 'gn.svg',
	'GNB': 'gw.svg',
	'GUY': 'gy.svg',
	'HTI': 'ht.svg',
	'HMD': 'hm.svg',
	'VAT': 'va.svg',
	'HND': 'hn.svg',
	'HKG': 'hk.svg',
	'HUN': 'hu.svg',
	'ISL': 'is.svg',
	'IND': 'in.svg',
	'IDN': 'id.svg',
	'IRN': 'ir.svg',
	'IRQ': 'iq.svg',
	'IRL': 'ie.svg',
	'IMN': 'im.svg',
	'ISR': 'il.svg',
	'ITA': 'it.svg',
	'JAM': 'jm.svg',
	'JPN': 'jp.svg',
	'JEY': 'je.svg',
	'JOR': 'jo.svg',
	'KAZ': 'kz.svg',
	'KEN': 'ke.svg',
	'KIR': 'ki.svg',
	'PRK': 'kp.svg',
	'KOR': 'kr.svg',
	'KWT': 'kw.svg',
	'KGZ': 'kg.svg',
	'LAO': 'la.svg',
	'LVA': 'lv.svg',
	'LBN': 'lb.svg',
	'LSO': 'ls.svg',
	'LBR': 'lr.svg',
	'LBY': 'ly.svg',
	'LIE': 'li.svg',
	'LTU': 'lt.svg',
	'LUX': 'lu.svg',
	'MAC': 'mo.svg',
	'MKD': 'mk.svg',
	'MDG': 'mg.svg',
	'MWI': 'mw.svg',
	'MYS': 'my.svg',
	'MDV': 'mv.svg',
	'MLI': 'ml.svg',
	'MLT': 'mt.svg',
	'MHL': 'mh.svg',
	'MTQ': 'mq.svg',
	'MRT': 'mr.svg',
	'MUS': 'mu.svg',
	'MYT': 'yt.svg',
	'MEX': 'mx.svg',
	'FSM': 'fm.svg',
	'MDA': 'md.svg',
	'MCO': 'mc.svg',
	'MNG': 'mn.svg',
	'MNE': 'me.svg',
	'MSR': 'ms.svg',
	'MAR': 'ma.svg',
	'MOZ': 'mz.svg',
	'MMR': 'mm.svg',
	'NAM': 'na.svg',
	'NRU': 'nr.svg',
	'NPL': 'np.svg',
	'NLD': 'nl.svg',
	'NCL': 'nc.svg',
	'NZL': 'nz.svg',
	'NIC': 'ni.svg',
	'NER': 'ne.svg',
	'NGA': 'ng.svg',
	'NIU': 'nu.svg',
	'NFK': 'nf.svg',
	'MNP': 'mp.svg',
	'NOR': 'no.svg',
	'OMN': 'om.svg',
	'PAK': 'pk.svg',
	'PLW': 'pw.svg',
	'PSE': 'ps.svg',
	'PAN': 'pa.svg',
	'PNG': 'pg.svg',
	'PRY': 'py.svg',
	'PER': 'pe.svg',
	'PHL': 'ph.svg',
	'PCN': 'pn.svg',
	'POL': 'pl.svg',
	'PRT': 'pt.svg',
	'PRI': 'pr.svg',
	'QAT': 'qa.svg',
	'REU': 're.svg',
	'ROU': 'ro.svg',
	'RUS': 'ru.svg',
	'RWA': 'rw.svg',
	'BLM': 'bl.svg',
	'SHN': 'sh.svg',
	'KNA': 'kn.svg',
	'LCA': 'lc.svg',
	'MAF': 'mf.svg',
	'SPM': 'pm.svg',
	'VCT': 'vc.svg',
	'WSM': 'ws.svg',
	'SWZ': 'sz.svg', 
	'SMR': 'sm.svg',
	'STP': 'st.svg',
	'SAU': 'sa.svg',
	'SEN': 'sn.svg',
	'SRB': 'rs.svg',
	'SYC': 'sc.svg',
	'SLE': 'sl.svg',
	'SGP': 'sg.svg',
	'SXM': 'sx.svg',
	'SVK': 'sk.svg',
	'SVN': 'si.svg',
	'SLB': 'sb.svg',
	'SOM': 'so.svg',
	'ZAF': 'za.svg',
	'SGS': 'gs.svg',
	'SSD': 'ss.svg',
	'ESP': 'es.svg',
	'LKA': 'lk.svg',
	'SDN': 'sd.svg',
	'SUR': 'sr.svg',
	'SJM': 'sj.svg',
	'SWE': 'se.svg',
	'CHE': 'ch.svg',
	'SYR': 'sy.svg',
	'TWN': 'tw.svg',
	'TJK': 'tj.svg',
	'TZA': 'tz.svg',
	'THA': 'th.svg',
	'TLS': 'tl.svg',
	'TGO': 'tg.svg',
	'TKL': 'tk.svg',
	'TON': 'to.svg',
	'TTO': 'tt.svg',
	'TUN': 'tn.svg',
	'TUR': 'tr.svg',
	'TKM': 'tm.svg',
	'TCA': 'tc.svg',
	'TUV': 'tv.svg',
	'UGA': 'ug.svg',
	'UKR': 'ua.svg',
	'ARE': 'ae.svg',
	'GBR': 'gb.svg',
	'USA': 'us.svg',
	'UMI': 'um.svg',
	'URY': 'uy.svg',
	'UZB': 'uz.svg',
	'VUT': 'vu.svg',
	'VEN': 've.svg',
	'VNM': 'vn.svg',
	'VGB': 'vg.svg',
	'VIR': 'vi.svg',
	'WLF': 'wf.svg',
	'ESH': 'eh.svg',
	'YEM': 'ye.svg',
	'ZMB': 'zm.svg',
	'ZWE': 'zw.svg'
};

document.addEventListener('DOMContentLoaded', function () {
	const defaultContinentButton = document.querySelector('.btn-group-cont .btn.active');
	const paisesContainer = document.getElementById('menu-paises');
	const selectedContinent = defaultContinentButton.getAttribute('data-cont');
	const paisesSeleccionados = paisesPorContinente[selectedContinent];

	// Mostrar países correspondientes al continente seleccionado por defecto
	renderPaises(paisesSeleccionados, paisesContainer);
});

const buttons = document.querySelectorAll('.btn-group-cont .btn');

buttons.forEach(function (button) {
	button.addEventListener('click', function () {
		const selectedContinent = this.getAttribute('data-cont');
		const paisesSeleccionados = paisesPorContinente[selectedContinent];
		const paisesContainer = document.getElementById('menu-paises');

		// Limpiar el contenedor de países y generar la nueva lista
		paisesContainer.innerHTML = '';
		renderPaises(paisesSeleccionados, paisesContainer);

		// Cambiar el estilo del botón seleccionado
		buttons.forEach(function (btn) {
			btn.classList.remove('active');
		});
		this.classList.add('active');
	});
});

function renderPaises(paises, container) {
	const defaultContinentButton = document.querySelector('.btn-group-cont .btn.active');
	const selectedContinent = defaultContinentButton.getAttribute('data-cont');
	//container.innerHTML = `<h2>Países en el continente de ${selectedContinent}</h2>`;
	const divContainer = document.createElement('div');

	divContainer.className = 'justify-content-center row'

	paises.forEach(function (pais) {
		const divPais = document.createElement('div');
		const link = document.createElement('a');
		link.href = `/dstats/perfil/${pais.iso_code}`; // URL del país basado en su código ISO alpha
		//link.textContent = pais.pais_name;
		const img = document.createElement('img');
		img.src = `/static/img/banderas/${banderasMapping[pais.iso_code]}`; // Ruta a las imágenes de las banderas
		img.alt = pais.iso_code; // Código ISO del país como texto alternativo para la imagen
		img.style.maxWidth = '50px';
		img.style.maxHeight = '30px'; 
		img.title = pais.pais_name;
		link.appendChild(img);
		//const span = document.createElement('span');
		//span.textContent = pais.pais_name;
		//const p = document.createElement('p');
		//p.textContent = pais.pais_name;
		divPais.appendChild(link);
		divContainer.appendChild(divPais);
		divPais.className = 'mb-3 col-md-2 col-sm-3 col-6 text-center'
		link.className = 'menu-pais-link'
	});

	container.appendChild(divContainer);
}